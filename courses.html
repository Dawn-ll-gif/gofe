<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åå°ç®¡ç†ç³»ç»Ÿ - åå¤å¤§å­¦</title>
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <div class="admin-container">
        <!-- ä¾§è¾¹æ  -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <h2>åå°ç®¡ç†</h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active">
					<li><a href="dashboard.html" nclick="showSection('dashboard')">
                        <span class="icon">ğŸ“Š</span> ä»ªè¡¨ç›˜
                    </a></li>
                    <li><a href="users.html"  onClick="showsection('users')">
                        <span class="icon">ğŸ‘¥</span> ç”¨æˆ·ç®¡ç†
                    </a></li>
                    <li><a href= "news.html" onclick="showSection('news')">
                        <span class="icon">ğŸ“°</span> æ–°é—»ç®¡ç†
                    </a></li>
                    <li><a href="students.html" onclick="showSection('students')">
                        <span class="icon">ğŸ“</span> å­¦ç”Ÿç®¡ç†
                    </a></li>
                    <li><a href="teachers.html" onclick="showSection('teachers')">
                        <span class="icon">ğŸ‘¨â€ğŸ«</span> æ•™å¸ˆç®¡ç†
                    </a></li>
                    <li><a href="courses.html" onclick="showSection('courses')">
                        <span class="icon">ğŸ“š</span> è¯¾ç¨‹ç®¡ç†
                    </a></li>
                    <li><a href="uploads.html" onclick="showSection('uploads')">
                        <span class="icon">ğŸ“¤</span> ä¸Šä¼ ç®¡ç†
                    </a></li>
                    <li><a href="settings.html" onclick="showSection('settings')">
                        <span class="icon">âš™ï¸</span> ç³»ç»Ÿè®¾ç½®
                    </a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="index.html" class="logout-btn">é€€å‡ºç™»å½•</a>
            </div>
        </aside>

            <!-- ä¸»å†…å®¹åŒº -->
    <main class="admin-main">
        <!-- å¤´éƒ¨ -->
        <header class="admin-header">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
                <h1>è¯¾ç¨‹ç®¡ç†</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span>ç®¡ç†å‘˜</span>
                    <img src="https://picsum.photos/40/40?person" alt="ç”¨æˆ·å¤´åƒ">
                </div>
            </div>
        </header>

        <!-- å†…å®¹åŒºåŸŸ -->
        <section class="admin-section active" id="courses">
            <div class="section-header">
                <h2>è¯¾ç¨‹åˆ—è¡¨</h2>
                <div class="section-actions">
                    <input type="text" class="search-input" placeholder="æœç´¢è¯¾ç¨‹..." oninput="searchCourses()">
                    <select class="filter-select" onchange="filterCourses()">
                        <option value="">æ‰€æœ‰é™¢ç³»</option>
                        <option value="è®¡ç®—æœºå­¦é™¢">è®¡ç®—æœºå­¦é™¢</option>
                        <option value="è½¯ä»¶å­¦é™¢">è½¯ä»¶å­¦é™¢</option>
                        <option value="æ•°æ®ç§‘å­¦å­¦é™¢">æ•°æ®ç§‘å­¦å­¦é™¢</option>
                    </select>
                    <button class="btn btn-primary" onclick="openAddCourseModal()">æ·»åŠ è¯¾ç¨‹</button>
                </div>
            </div>

            <!-- è¯¾ç¨‹è¡¨æ ¼ -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>è¯¾ç¨‹ä»£ç </th>
                            <th>è¯¾ç¨‹åç§°</th>
                            <th>æˆè¯¾æ•™å¸ˆ</th>
                            <th>å­¦åˆ†</th>
                            <th>æ‰€å±é™¢ç³»</th>
                            <th>å¼€è¯¾æ—¶é—´</th>
                            <th>çŠ¶æ€</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="courseTableBody">
                        <!-- è¯¾ç¨‹æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </tbody>
                </table>
            </div>

            <!-- åˆ†é¡µ -->
            <div class="pagination">
                <div class="pagination-info">æ˜¾ç¤º 1-10 æ¡ï¼Œå…± 50 æ¡</div>
                <div class="pagination-buttons">
                    <button class="btn btn-secondary">ä¸Šä¸€é¡µ</button>
                    <button class="btn active">1</button>
                    <button class="btn">2</button>
                    <button class="btn">3</button>
                    <span class="pagination-ellipsis">...</span>
                    <button class="btn">5</button>
                    <button class="btn btn-secondary">ä¸‹ä¸€é¡µ</button>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- æ·»åŠ è¯¾ç¨‹æ¨¡æ€æ¡† -->
<div class="modal" id="addCourseModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>æ·»åŠ è¯¾ç¨‹</h3>
            <button class="close-btn" onclick="closeAddCourseModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <form class="modal-form" id="courseForm">
                <div class="form-group">
                    <label>è¯¾ç¨‹ä»£ç  <span class="required">*</span></label>
                    <input type="text" id="courseCode" required>
                </div>
                <div class="form-group">
                    <label>è¯¾ç¨‹åç§° <span class="required">*</span></label>
                    <input type="text" id="courseName" required>
                </div>
                <div class="form-group">
                    <label>æˆè¯¾æ•™å¸ˆ</label>
                    <input type="text" id="courseTeacher">
                </div>
                <div class="form-group">
                    <label>å­¦åˆ†</label>
                    <input type="number" id="courseCredits" min="1" max="10">
                </div>
                <div class="form-group">
                    <label>æ‰€å±é™¢ç³»</label>
                    <select id="courseDepartment">
                        <option value="è®¡ç®—æœºå­¦é™¢">è®¡ç®—æœºå­¦é™¢</option>

                        <option value="è½¯ä»¶å­¦é™¢">è½¯ä»¶å­¦é™¢</option>
                        <option value="æ•°æ®ç§‘å­¦å­¦é™¢">æ•°æ®ç§‘å­¦å­¦é™¢</option>
                        <option value="äººå·¥æ™ºèƒ½å­¦é™¢">äººå·¥æ™ºèƒ½å­¦é™¢</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å¼€è¯¾æ—¶é—´</label>
                    <input type="text" id="courseSchedule" placeholder="ä¾‹å¦‚ï¼šå‘¨ä¸€ 9:00-11:00">
                </div>
                <div class="form-group">
                    <label>çŠ¶æ€</label>
                    <select id="courseStatus">
                        <option value="è¿›è¡Œä¸­">è¿›è¡Œä¸­</option>
                        <option value="å·²ç»“æŸ">å·²ç»“æŸ</option>
                        <option value="æœªå¼€å§‹">æœªå¼€å§‹</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeAddCourseModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn btn-primary">æ·»åŠ </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // è¯¾ç¨‹æ•°æ®
    let courseData = [
        {code: "CS101", name: "è®¡ç®—æœºç§‘å­¦å¯¼è®º", teacher: "å¼ æ•™æˆ", credits: 3, department: "è®¡ç®—æœºå­¦é™¢", schedule: "å‘¨ä¸€ 9:00-11:00", status: "è¿›è¡Œä¸­"},
        {code: "SE201", name: "è½¯ä»¶å·¥ç¨‹", teacher: "æè®²å¸ˆ", credits: 4, department: "è½¯ä»¶å­¦é™¢", schedule: "å‘¨äºŒ 14:00-16:00", status: "è¿›è¡Œä¸­"},
        {code: "DS301", name: "æ•°æ®ç»“æ„", teacher: "ç‹å‰¯æ•™æˆ", credits: 3, department: "æ•°æ®ç§‘å­¦å­¦é™¢", schedule: "å‘¨ä¸‰ 10:00-12:00", status: "å·²ç»“æŸ"}
    ];

    // æ¸²æŸ“è¯¾ç¨‹åˆ—è¡¨
    function renderCourseList(courses = courseData) {
        const tbody = document.getElementById('courseTableBody');
        tbody.innerHTML = '';
        courses.forEach(course => {
            const row = `
                <tr>
                    <td>${course.code}</td>
                    <td>${course.name}</td>
                    <td>${course.teacher}</td>
                    <td>${course.credits}</td>
                    <td>${course.department}</td>
                    <td>${course.schedule}</td>
                    <td><span class="status ${course.status === 'è¿›è¡Œä¸­' ? 'active' : course.status === 'æœªå¼€å§‹' ? 'pending' : 'inactive'}">${course.status}</span></td>
                    <td>
                        <button class="btn btn-sm btn-view" onclick="viewCourse('${course.code}')">æŸ¥çœ‹</button>
                        <button class="btn btn-sm btn-edit" onclick="editCourse('${course.code}')">ç¼–è¾‘</button>
                        <button class="btn btn-sm btn-delete" onclick="deleteCourse('${course.code}')">åˆ é™¤</button>
                    </td>
                </tr>
            `;
            tbody.innerHTML += row;
        });
    }

    // æœç´¢è¯¾ç¨‹
    function searchCourses() {
        const searchTerm = document.querySelector('.search-input').value.toLowerCase();
        const filtered = courseData.filter(course => 
            course.name.toLowerCase().includes(searchTerm) || 
            course.code.toLowerCase().includes(searchTerm) ||
            course.teacher.toLowerCase().includes(searchTerm)
        );
        renderCourseList(filtered);
    }

    // ç­›é€‰è¯¾ç¨‹
    function filterCourses() {
        const departmentFilter = document.querySelector('.filter-select').value;
        if (!departmentFilter) {
            renderCourseList();
            return;
        }
        const filtered = courseData.filter(course => course.department === departmentFilter);
        renderCourseList(filtered);
    }

    // æ‰“å¼€æ·»åŠ è¯¾ç¨‹æ¨¡æ€æ¡†
    function openAddCourseModal() {
        document.getElementById('addCourseModal').classList.add('active');
    }

    // å…³é—­æ·»åŠ è¯¾ç¨‹æ¨¡æ€æ¡†
    function closeAddCourseModal() {
        document.getElementById('addCourseModal').classList.remove('active');
        document.getElementById('courseForm').reset();
    }

    // æäº¤è¯¾ç¨‹è¡¨å•
    document.getElementById('courseForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const code = document.getElementById('courseCode').value;
        const name = document.getElementById('courseName').value;
        const teacher = document.getElementById('courseTeacher').value;
        const credits = document.getElementById('courseCredits').value;
        const department = document.getElementById('courseDepartment').value;
        const schedule = document.getElementById('courseSchedule').value;
        const status = document.getElementById('courseStatus').value;
        
        const newCourse = {
            code,
            name,
            teacher,
            credits,
            department,
            schedule,
            status
        };
        
        courseData.push(newCourse);
        renderCourseList();
        closeAddCourseModal();
        showMessage('è¯¾ç¨‹æ·»åŠ æˆåŠŸï¼', 'success');
    });

    // æŸ¥çœ‹è¯¾ç¨‹è¯¦æƒ…
    function viewCourse(code) {
        const course = courseData.find(c => c.code === code);
        if (course) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>è¯¾ç¨‹è¯¦æƒ…</h3>
                        <button class="close-btn" onclick="this.parentElement.parentElement.remove()">Ã—</button>
                    </div>
                    <div class="modal-body">
                        <div class="detail-view">
                            <div class="detail-items">
                                <div class="detail-item">
                                    <span class="detail-label">è¯¾ç¨‹ä»£ç ï¼š</span>
                                    <span class="detail-value">${course.code}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">è¯¾ç¨‹åç§°ï¼š</span>
                                    <span class="detail-value">${course.name}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">æˆè¯¾æ•™å¸ˆï¼š</span>
                                    <span class="detail-value">${course.teacher}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">å­¦åˆ†ï¼š</span>
                                    <span class="detail-value">${course.credits}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">æ‰€å±é™¢ç³»ï¼š</span>
                                    <span class="detail-value">${course.department}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">å¼€è¯¾æ—¶é—´ï¼š</span>
                                    <span class="detail-value">${course.schedule}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">çŠ¶æ€ï¼š</span>
                                    <span class="detail-value"><span class="status ${course.status === 'è¿›è¡Œä¸­' ? 'active' : course.status === 'æœªå¼€å§‹' ? 'pending' : 'inactive'}">${course.status}</span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
    }

    // ç¼–è¾‘è¯¾ç¨‹
    function editCourse(code) {
        const course = courseData.find(c => c.code === code);
        if (course) {
            document.getElementById('courseCode').value = course.code;
            document.getElementById('courseName').value = course.name;
            document.getElementById('courseTeacher').value = course.teacher;
            document.getElementById('courseCredits').value = course.credits;
            document.getElementById('courseDepartment').value = course.department;
            document.getElementById('courseSchedule').value = course.schedule;
            document.getElementById('courseStatus').value = course.status;
            openAddCourseModal();
        }
    }

    // åˆ é™¤è¯¾ç¨‹
    function deleteCourse(code) {
        if (confirm('ç¡®å®šè¦åˆ é™¤è¯¥è¯¾ç¨‹å—ï¼Ÿ')) {
            courseData = courseData.filter(c => c.code !== code);
            renderCourseList();
            showMessage('è¯¾ç¨‹åˆ é™¤æˆåŠŸï¼', 'success');
        }
    }

    // æ˜¾ç¤ºæ¶ˆæ¯æç¤º
    function showMessage(text, type) {
        const message = document.createElement('div');
        message.className = `message message-${type}`;
        message.innerHTML = `
            <div class="message-icon">${type === 'success' ? 'âœ“' : '!'}</div>
            <div class="message-text">${text}</div>
            <button class="message-close" onclick="this.parentElement.remove()">Ã—</button>
        `;
        document.body.appendChild(message);
        setTimeout(() => message.remove(), 3000);
    }

    // åˆ‡æ¢ä¾§è¾¹æ ï¼ˆç§»åŠ¨ç«¯ï¼‰
    function toggleSidebar() {
        document.querySelector('.admin-sidebar').classList.toggle('active');
    }

    // é¡µé¢åŠ è½½æ—¶æ¸²æŸ“è¯¾ç¨‹åˆ—è¡¨
    document.addEventListener('DOMContentLoaded', renderCourseList);
</script>
